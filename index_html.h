String INDEX_HTML = R"=====(<!DOCTYPE html>
<html><head><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><title>{NAME}</title><link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css"><link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css"><script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script><script src="https://unpkg.com/jquery/dist/jquery.min.js"></script><script>const BLIND_COUNT=2,baseIpEnd=150,wsUriTemplate="ws://192.168.1.150:81/",blindHomeSectionTemplate='<ons-card><ons-row><ons-col style="text-align:center"><h1>Blind {BLIND_NUMBER}</h1></ons-col><ons-col style="text-align:center;margin-top:25px">Connection:<ons-icon id="conn_status_icon_{BLIND_NUMBER}" icon="fa-circle" style="color:#ff0"></ons-col></ons-row></ons-card><ons-card><div class="title">Adjust position</div><div class="content"><p>Move the slider to the wanted position or use the arrows to open/close to the max positions</p></div><ons-row><ons-col width="40px" style="text-align:center;line-height:31px"></ons-col><ons-col><ons-progress-bar id="pbar_{BLIND_NUMBER}" value="75"></ons-progress-bar></ons-col><ons-col width="40px" style="text-align:center;line-height:31px"></ons-col></ons-row><ons-row><ons-col width="40px" style="text-align:center;line-height:31px"><ons-icon id="arrow-open_{BLIND_NUMBER}" class="arrow-open" blind-number="{BLIND_NUMBER}" icon="fa-arrow-up" size="2x"></ons-icon></ons-col><ons-col><ons-range id="setrange_{BLIND_NUMBER}" class="setrange" blind-number="{BLIND_NUMBER}" style="width:100%" value="25"></ons-range></ons-col><ons-col width="40px" style="text-align:center;line-height:31px"><ons-icon id="arrow-close_{BLIND_NUMBER}" class="arrow-close" blind-number="{BLIND_NUMBER}" icon="fa-arrow-down" size="2x"></ons-icon></ons-col></ons-row></ons-card>',blindSettingSectionTemplate='<ons-card><ons-row><ons-col style="text-align:center"><h1>Blind {BLIND_NUMBER}</h1></ons-col></ons-row></ons-card><ons-card><div class="title">Control</div><ons-row style="width:100%"><ons-col style="text-align:center"><ons-icon id="arrow-up-man_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" class="arrow-up-man" icon="fa-arrow-up" size="2x"></ons-icon></ons-col><ons-col style="text-align:center"><ons-icon id="arrow-stop-man_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" class="arrow-stop-man" icon="fa-stop" size="2x"></ons-icon></ons-col><ons-col style="text-align:center"><ons-icon id="arrow-down-man_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" class="arrow-down-man" icon="fa-arrow-down" size="2x"></ons-icon></ons-col></ons-row></ons-card><ons-card><div class="title">Store</div><ons-row style="width:100%"><ons-col style="text-align:center"><ons-button id="set-start_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" class="set-start">Set Start</ons-button></ons-col><ons-col style="text-align:center">&nbsp;</ons-col><ons-col style="text-align:center"><ons-button id="set-max_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" class="set-max">Set Max</ons-button></ons-col></ons-row></ons-card><ons-card><div class="title">Scheduler</div><ons-row style="width:100%"><ons-col style="text-align:center">Open at: <input id="timepicker_open_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" type="time" class="text-input timepicker_open" ng-model="inputTime"></ons-col><ons-col style="text-align:center">&nbsp;</ons-col><ons-col style="text-align:center">Close at: <input id="timepicker_close_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" type="time" class="text-input timepicker_close" ng-model="inputTime"></ons-col></ons-row><ons-row style="width:100%"><ons-col style="text-align:center"><ons-button id="set-schedule_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" class="set-schedule">Save Schedule</ons-button></ons-col><ons-col style="text-align:center">&nbsp;</ons-col><ons-col style="text-align:center"><ons-button id="clear-schedule_{BLIND_NUMBER}" blind-number="{BLIND_NUMBER}" class="button button--outline clear-schedule">Clear Schedule</ons-button></ons-col></ons-row></ons-card>';window.fn={},window.fn.open=function(){document.getElementById("menu").open()},window.fn.load=function(n){var o=document.getElementById("content"),t=document.getElementById("menu");o.load(n).then(t.close.bind(t)).then(setActions())};const gotoPos=function(n,o){doSend(n,"percent",o)},setActions=function(){setTimeout((function(){doSend(void 0,"update",0)}),500),setTimeout((function(){renderPage(),setTimeout((function(){doSend(void 0,"update",0)}),200),$(".arrow-close").on("click",(function(){const n=$(this).attr("blind-number");$("#setrange_"+n).val(100),gotoPos(n-1,100)})),$(".arrow-open").on("click",(function(){const n=$(this).attr("blind-number");$("#setrange_"+n).val(0),gotoPos(n-1,0)})),$(".setrange").on("change",(function(){const n=$(this).attr("blind-number");gotoPos(n-1,$("#setrange_"+n).val())})),$(".arrow-up-man").on("click",(function(){doSend($(this).attr("blind-number")-1,"manual",-1)})),$(".arrow-down-man").on("click",(function(){doSend($(this).attr("blind-number")-1,"manual",1)})),$(".arrow-stop-man").on("click",(function(){doSend($(this).attr("blind-number")-1,"manual",0)})),$(".set-start").on("click",(function(){doSend($(this).attr("blind-number")-1,"start",0)})),$(".set-max").on("click",(function(){doSend($(this).attr("blind-number")-1,"max",0)})),$(".clear-schedule").on("click",(function(){const n=$(this).attr("blind-number");$("#timepicker_open_"+n.toString()).val(""),$("#timepicker_close_"+n.toString()).val("")})),$(".set-schedule").on("click",(function(){const n=$(this).attr("blind-number"),o=$("#timepicker_open_"+n.toString()).val(),t=$("#timepicker_close_"+n.toString()).val();doSend(n-1,"schedule",o+";"+t)}))}),200)};$(document).ready((function(){setActions()}));var websocketArr=[],timeOutArr=[];function retry(n){clearTimeout(timeOutArr[n]),timeOutArr[n]=setTimeout((function(){websocket=null,initWs(n)}),5e3)}function renderPage(){const n=document.getElementById("pageContent"),o=document.getElementById("settingsContent");for(let t=1;t<=BLIND_COUNT;t++)n&&(n.innerHTML+=blindHomeSectionTemplate.replaceAll("{BLIND_NUMBER}",t.toString())),o&&(o.innerHTML+=blindSettingSectionTemplate.replaceAll("{BLIND_NUMBER}",t.toString()))}function onload(){initAllWebsockets()}function initAllWebsockets(){for(let n=0;n<BLIND_COUNT;n+=2)initWs(n)}function getWsUri(n){return wsUriTemplate.replace("{IP_END}",baseIpEnd+n)}async function initWs(n){const o=n+1;setTimeout((function(){$("#conn_status_icon_"+o).css("color","yellow")}),1),setTimeout((function(){$("#conn_status_icon_"+(o+1)).css("color","yellow")}),1),ons.notification.toast({message:"Connecting to device "+o.toString()+"...",timeout:1e3});try{const t=new WebSocket(getWsUri(n));websocketArr[n]=t,t.onclose=function(){},t.onerror=function(t){ons.notification.toast({message:"Cannot connect to device "+o.toString(),timeout:2e3}),setTimeout((function(){$("#conn_status_icon_"+o).css("color","red")}),1),setTimeout((function(){$("#conn_status_icon_"+(o+1)).css("color","red")}),1),retry(n)},t.onopen=function(t){ons.notification.toast({message:"Connected to device "+o.toString(),timeout:2e3}),setTimeout((function(){$("#conn_status_icon_"+o).css("color","yellowgreen")}),1),setTimeout((function(){$("#conn_status_icon_"+(o+1)).css("color","yellowgreen")}),1),setTimeout((function(){doSend(n,"update",0)}),1e3)},t.onclose=function(t){ons.notification.toast({message:"Disconnected. Retrying "+o.toString(),timeout:2e3}),retry(n)},t.onmessage=function(o){try{const t=JSON.parse(o.data),e=t.id+n;if(void 0!==t.position&&$("#pbar_"+(e+1).toString()).attr("value",t.position),void 0!==t.set&&$("#setrange_"+(e+1).toString()).val(t.set),void 0!==t.scheduledOpen){const n=$("#timepicker_open_"+(e+1).toString());n&&n.val(t.scheduledOpen)}if(void 0!==t.scheduledClose){const n=$("#timepicker_close_"+(e+1).toString());n&&n.val(t.scheduledClose)}void 0!==t.scheduleSuccess&&(!0===t.scheduleSuccess?ons.notification.toast({message:"Schedule action for "+(e+1).toString()+" saved successfully",timeout:1e3}):ons.notification.toast({message:"Couldn't save schedule action for "+(e+1).toString(),timeout:1e3}))}catch(n){}}}catch(t){ons.notification.toast({message:"Cannot connect to device "+o.toString()+". Retrying...",timeout:2e3}),setTimeout((function(){$("#conn_status_icon_"+o).css("color","red")}),1),setTimeout((function(){$("#conn_status_icon_"+(o+1)).css("color","red")}),1),retry(n)}}function doSend(n,o,t){const e='{"id": '+(n||0).toString()+', "action": "'+o+'", "value": "'+t.toString()+'"}';if(void 0!==n){const o=websocketArr[Math.floor(n/2)];o&&1==o.readyState&&o.send(e)}else websocketArr.forEach((function(n,o,t){n&&1==n.readyState&&n.send(e)}))}function closeAllWs(){websocketArr.forEach((n=>{n&&1==n.readyState&&n.close()}))}window.addEventListener("load",onload,!1),window.onbeforeunload=function(){closeAllWs()};</script></head><body><ons-splitter><ons-splitter-side id="menu" side="left" width="220px" collapse swipeable><ons-page><ons-list><ons-list-item onclick='fn.load("home.html")' tappable>Home</ons-list-item><ons-list-item onclick='fn.load("settings.html")' tappable>Settings</ons-list-item></ons-list></ons-page></ons-splitter-side><ons-splitter-content id="content" page="home.html"></ons-splitter-content></ons-splitter><template id="home.html"><ons-page><ons-toolbar><div class="left"><ons-toolbar-button onclick="fn.open()"><ons-icon icon="md-menu"></ons-icon></ons-toolbar-button></div></ons-toolbar><div id="pageContent"></div></ons-page></template><template id="settings.html"><ons-page><ons-toolbar><div class="left"><ons-toolbar-button onclick="fn.open()"><ons-icon icon="md-menu"></ons-icon></ons-toolbar-button></div><div class="center">Settings</div></ons-toolbar><div id="settingsContent"></div></ons-page></template></body></html>
)=====";
